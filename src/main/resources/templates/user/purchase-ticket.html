<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="user/fragments/head :: head"></head>
  <head>
    <link rel="stylesheet" href="/assets-user/css/purchase-ticket.css"/>
    <title>Mua vé ngay</title>
  </head>
  <body>
    <div th:insert="~{user/fragments/notification :: notification}"></div>

    <!-- ===== HEADER ===== -->
    <!-- <header id="headerUser" style="display: none" th:insert="~{user/fragments/header-authenticated :: header-authenticated}"></header> -->

    <!-- Main Content -->
    <main id="main-content" class="purchase-ticket-page">
      <!-- Event Info Header -->
      <section class="event-info-header">
        <h1 id="event-title"></h1>
        <p id="event-date-time"></p>
        <p id="event-location"></p>
      </section>

      <!-- Progress Bar -->
      <section class="progress-bar-section">
        <div class="progress-steps">
          <div class="step active" data-step="1">
            <span class="step-number">1</span>
            <span class="step-label">Chọn vé</span>
          </div>
          <div class="step" data-step="2">
            <span class="step-number">2</span>
            <span class="step-label">Thông tin người mua</span>
          </div>
          <div class="step" data-step="3">
            <span class="step-number">3</span>
            <span class="step-label">Thanh toán</span>
          </div>
          <div class="step" data-step="4">
            <span class="step-number">4</span>
            <span class="step-label">Xác nhận</span>
          </div>
        </div>
      </section>

      <!-- Step Content -->
      <section class="step-content-section">
        <!-- Step 1: Chọn vé -->
        <div class="step-content active" id="step-1">
          <h2>Chọn hạng vé</h2>
          <table class="ticket-table">
            <thead>
              <tr>
                <th>Hạng vé</th>
                <th>Giá vé</th>
                <th>Số lượng</th>
              </tr>
            </thead>
            <tbody id="ticket-selection-body"></tbody>
          </table>
          <div class="total-price">
            <span>Tổng tiền:</span>
            <span id="total-price">0đ</span>
          </div>
          <div class="button-container">
            <button class="btn-next" id="next-step-1">Tiếp tục</button>
          </div>
        </div>

        <!-- Step 2: Thông tin người mua -->
        <div class="step-content" id="step-2">
          <h2>Thông tin người mua</h2>
          <form id="buyer-info-form">
            <div class="form-group">
              <label for="buyer-name">Họ và tên:</label>
              <input type="text" id="buyer-name" required />
            </div>
            <div class="form-group">
              <label for="buyer-email">Email:</label>
              <input type="email" id="buyer-email" required />
            </div>
            <div class="form-group">
              <label for="buyer-phone">Số điện thoại:</label>
              <input type="tel" id="buyer-phone" required />
            </div>
            <div class="button-container">
                <button type="button" class="btn-prev" id="prev-step-2">Quay lại</button>
                <button type="button" class="btn-next" id="next-step-2">Tiếp tục</button>
            </div>
          </form>
        </div>

        <!-- Step 3: Thanh toán -->
        <div class="step-content" id="step-3">
          <h2>Chọn phương thức thanh toán</h2>
          <div class="payment-methods">
            <div class="payment-option">
              <input type="radio" id="vnpay" name="payment-method" value="vnpay" checked />
              <label for="vnpay">
                <img src="/upload/other/vnpay.png" alt="VNPay" />
                Thanh toán qua VNPay
              </label>
            </div>
            <div class="payment-option">
              <input type="radio" id="momo" name="payment-method" value="momo" />
              <label for="momo">
                <img src="/upload/other/momo.png" alt="MoMo" />
                Thanh toán qua MoMo
              </label>
            </div>
          </div>
          <div class="button-container">
            <button type="button" class="btn-prev" id="prev-step-3">Quay lại</button>
            <button type="button" class="btn-next" id="next-step-3">Thanh toán</button>
          </div>
        </div>

        <!-- Step 4: Xác nhận -->
        <div class="step-content" id="step-4">
          <h2>Xác nhận đơn hàng</h2>
          <div class="order-summary">
            <p><strong>Sự kiện:</strong> <span id="confirm-event-title"></span></p>
            <p><strong>Hạng vé:</strong> <span id="confirm-ticket-type"></span></p>
            <p><strong>Số lượng:</strong> <span id="confirm-ticket-quantity"></span></p>
            <p><strong>Tổng tiền:</strong> <span id="confirm-total-price"></span></p>
            <p><strong>Người mua:</strong> <span id="confirm-buyer-name"></span></p>
            <p><strong>Email:</strong> <span id="confirm-buyer-email"></span></p>
            <p><strong>Số điện thoại:</strong> <span id="confirm-buyer-phone"></span></p>
            <p><strong>Phương thức thanh toán:</strong> <span id="confirm-payment-method"></span></p>
          </div>
          <div class="button-container">
            <button type="button" class="btn-prev" id="prev-step-4">Quay lại</button>
            <button type="button" class="btn-confirm" id="confirm-order">Xác nhận</button>
          </div>
        </div>
      </section>
    </main>

    <script src="/assets-user/js/common-header.js"></script>
    <script src="/assets-user/js/purchase-ticket.js"></script>
  </body>
</html>